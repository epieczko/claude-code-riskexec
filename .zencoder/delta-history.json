{"snapshots":{"C:/SDE/source/claude-code-riskexec/package.json":{"filePath":"C:/SDE/source/claude-code-riskexec/package.json","baseContent":"{\n  \"name\": \"claude-code-templates\",\n  \"version\": \"1.21.1\",\n  \"description\": \"Component templates and tracking system for Claude Code\",\n  \"main\": \"cli-tool/src/index.js\",\n  \"bin\": {\n    \"claude-code-templates\": \"cli-tool/bin/create-claude-config.js\",\n    \"cct\": \"cli-tool/bin/create-claude-config.js\"\n  },\n  \"scripts\": {\n    \"dev\": \"vercel dev\",\n    \"build\": \"echo 'Build complete'\",\n    \"start\": \"vercel dev\",\n    \"test\": \"echo 'No tests specified'\",\n    \"agent:security-auditor\": \"security-auditor 'Security audit covering codebase, dependencies, and deployment configuration'\", \n    \n  },\n  \"dependencies\": {\n    \"@vercel/postgres\": \"^0.10.0\",\n    \"boxen\": \"^5.1.2\",\n    \"chalk\": \"^4.1.2\",\n    \"chokidar\": \"^3.5.3\",\n    \"claude-code-router\": \"^2.1.1\",\n    \"commander\": \"^11.1.0\",\n    \"express\": \"^4.18.2\",\n    \"fs-extra\": \"^11.1.1\",\n    \"inquirer\": \"^8.2.6\",\n    \"open\": \"^8.4.2\",\n    \"ora\": \"^5.4.1\",\n    \"uuid\": \"^11.1.0\",\n    \"ws\": \"^8.18.3\"\n  },\n  \"devDependencies\": {\n    \"@vercel/node\": \"^3.0.0\"\n  },\n  \"keywords\": [\n    \"claude-code\",\n    \"templates\",\n    \"components\",\n    \"tracking\",\n    \"analytics\"\n  ],\n  \"author\": \"Claude Code Templates\",\n  \"license\": \"MIT\"\n}\n","baseTimestamp":1757469158642,"deltas":[{"timestamp":1757469160947,"changes":[{"type":"DELETE","lineNumber":14,"oldContent":"    \"agent:security-auditor\": \"security-auditor 'Security audit covering codebase, dependencies, and deployment configuration'\", "},{"type":"DELETE","lineNumber":15,"oldContent":"    "},{"type":"INSERT","lineNumber":14,"content":"    \"agent:security-auditor\": \"security-auditor 'Security audit covering codebase, dependencies, and deployment configuration'\","},{"type":"INSERT","lineNumber":15,"content":"    \"router:ui\": \"npx @musistudio/claude-code-router ui\","},{"type":"INSERT","lineNumber":16,"content":"    \"router:code\": \"npx @musistudio/claude-code-router code\","},{"type":"INSERT","lineNumber":17,"content":"    \"router:restart\": \"npx @musistudio/claude-code-router restart\","},{"type":"INSERT","lineNumber":18,"content":"    \"router:verify\": \"node ./scripts/router-verify.js\","},{"type":"INSERT","lineNumber":19,"content":"    \"router:install\": \"node ./scripts/router-install.js\""}]},{"timestamp":1757469181585,"changes":[{"type":"DELETE","lineNumber":14,"oldContent":"    \"agent:security-auditor\": \"security-auditor 'Security audit covering codebase, dependencies, and deployment configuration'\","},{"type":"DELETE","lineNumber":15,"oldContent":"    \"router:ui\": \"npx @musistudio/claude-code-router ui\","},{"type":"DELETE","lineNumber":16,"oldContent":"    \"router:code\": \"npx @musistudio/claude-code-router code\","},{"type":"INSERT","lineNumber":14,"content":"    \"agent:security-auditor\": \"security-auditor 'Security audit covering codebase, dependencies, and deployment configuration'\""},{"type":"DELETE","lineNumber":18,"oldContent":"    \"router:restart\": \"npx @musistudio/claude-code-router restart\","},{"type":"DELETE","lineNumber":20,"oldContent":"    \"router:verify\": \"node ./scripts/router-verify.js\","},{"type":"DELETE","lineNumber":22,"oldContent":"    \"router:install\": \"node ./scripts/router-install.js\""},{"type":"INSERT","lineNumber":32,"content":"    \"@musistudio/claude-code-router\": \"^1.0.49\","}]},{"timestamp":1757469190082,"changes":[{"type":"INSERT","lineNumber":15,"content":"    "},{"type":"DELETE","lineNumber":27,"oldContent":"    \"@musistudio/claude-code-router\": \"^1.0.49\","},{"type":"INSERT","lineNumber":33,"content":"    \"@musistudio/claude-code-router\": \"^1.0.49\","}]},{"timestamp":1757469193827,"changes":[{"type":"DELETE","lineNumber":14,"oldContent":"    \"agent:security-auditor\": \"security-auditor 'Security audit covering codebase, dependencies, and deployment configuration'\""},{"type":"DELETE","lineNumber":15,"oldContent":"    "},{"type":"INSERT","lineNumber":14,"content":"    \"agent:security-auditor\": \"security-auditor 'Security audit covering codebase, dependencies, and deployment configuration'\","},{"type":"INSERT","lineNumber":15,"content":"    \"router:ui\": \"npx @musistudio/claude-code-router ui\","},{"type":"INSERT","lineNumber":16,"content":"    \"router:code\": \"npx @musistudio/claude-code-router code\","},{"type":"INSERT","lineNumber":17,"content":"    \"router:restart\": \"npx @musistudio/claude-code-router restart\","},{"type":"INSERT","lineNumber":18,"content":"    \"router:verify\": \"node ./scripts/router-verify.js\","},{"type":"INSERT","lineNumber":19,"content":"    \"router:install\": \"node ./scripts/router-install.js\""}]},{"timestamp":1757469407050,"changes":[{"type":"DELETE","lineNumber":17,"oldContent":"  },"},{"type":"DELETE","lineNumber":19,"oldContent":"  \"dependencies\": {"},{"type":"DELETE","lineNumber":21,"oldContent":"    \"@vercel/postgres\": \"^0.10.0\","},{"type":"INSERT","lineNumber":20,"content":"  },"},{"type":"INSERT","lineNumber":21,"content":"  \"dependencies\": {"},{"type":"INSERT","lineNumber":22,"content":"    \"@vercel/postgres\": \"^0.10.0\","},{"type":"DELETE","lineNumber":47,"oldContent":"  \"author\": \"Claude Code Templates\","},{"type":"DELETE","lineNumber":48,"oldContent":"  \"license\": \"MIT\""},{"type":"INSERT","lineNumber":47,"content":"  \"author\": \"Claude Code Templates\""}]},{"timestamp":1757469411727,"changes":[{"type":"DELETE","lineNumber":18,"oldContent":"  },"},{"type":"INSERT","lineNumber":19,"content":"    \"router:install\": \"node ./scripts/router-install.js\""},{"type":"INSERT","lineNumber":20,"content":"  },"},{"type":"DELETE","lineNumber":22,"oldContent":"    \"router:install\": \"node ./scripts/router-install.js\""},{"type":"MODIFY","lineNumber":47,"content":"  \"author\": \"Claude Code RiskExec\"","oldContent":"  \"author\": \"Claude Code Templates\""}]},{"timestamp":1757469420670,"changes":[{"type":"MODIFY","lineNumber":1,"content":"  \"name\": \"claude-code-riskexec\",","oldContent":"  \"name\": \"claude-code-templates\","},{"type":"MODIFY","lineNumber":19,"content":"    \"router:install\": \"node ./scripts/router-install.js\"","oldContent":"    \"router:install\": \"node ./scripts/router-install.js\""}]},{"timestamp":1757469853350,"changes":[{"type":"MODIFY","lineNumber":15,"content":"    \"router:install\": \"node ./scripts/router-install.js\",","oldContent":"    \"router:ui\": \"npx @musistudio/claude-code-router ui\","},{"type":"INSERT","lineNumber":16,"content":"    \"router:verify\": \"node ./scripts/router-verify.js\","},{"type":"DELETE","lineNumber":17,"oldContent":"    \"router:restart\": \"npx @musistudio/claude-code-router restart\","},{"type":"DELETE","lineNumber":18,"oldContent":"    \"router:install\": \"node ./scripts/router-install.js\""},{"type":"DELETE","lineNumber":19,"oldContent":"    \"router:install\": \"node ./scripts/router-install.js\""},{"type":"INSERT","lineNumber":18,"content":"    \"router:ui\": \"npx @musistudio/claude-code-router ui\""}]},{"timestamp":1757475701602,"changes":[{"type":"INSERT","lineNumber":15,"content":"    \"policy:models\": \"node scripts/model-policy-check.js\","},{"type":"INSERT","lineNumber":16,"content":"    \"policy:router\": \"node scripts/router-verify.js\","},{"type":"INSERT","lineNumber":17,"content":"    \"policy:all\": \"npm run policy:models && npm run policy:router\","},{"type":"DELETE","lineNumber":37,"oldContent":"    \"@vercel/node\": \"^3.0.0\""},{"type":"INSERT","lineNumber":40,"content":"    \"@vercel/node\": \"^3.0.0\","},{"type":"INSERT","lineNumber":41,"content":"    \"front-matter\": \"^4.0.2\""}]}]},"C:/SDE/source/claude-code-riskexec/scripts/router-install.js":{"filePath":"C:/SDE/source/claude-code-riskexec/scripts/router-install.js","baseContent":"// scripts/router-install.js\nconst fs = require(\"fs\");\nconst os = require(\"os\");\nconst path = require(\"path\");\n\nconst src = path.join(process.cwd(), \".claude-code-router\", \"config.json\");\nconst dstDir = path.join(os.homedir(), \".claude-code-router\");\nconst dst = path.join(dstDir, \"config.json\");\n\nif (!fs.existsSync(src)) {\n    console.error(\"Missing .claude-code-router/config.json in repo\");\n    process.exit(1);\n}\n\nfs.mkdirSync(dstDir, { recursive: true });\n\nif (fs.existsSync(dst)) {\n    console.log(`Found existing ${dst}. Leaving it as is.`);\n    process.exit(0);\n}\n\nfs.copyFileSync(src, dst);\nconsole.log(`Wrote ${dst}`);\n\nconsole.log(\"\\nSet env vars before running the router:\");\nif (process.platform === \"win32\") {\n    console.log('  PowerShell:  setx ANTHROPIC_API_KEY \"<your_key>\"');\n    console.log('               setx CCR_APIKEY \"<a_local_secret>\"');\n} else {\n    console.log('  export ANTHROPIC_API_KEY=\"<your_key>\"');\n    console.log('  export CCR_APIKEY=\"<a_local_secret>\"');\n}\n","baseTimestamp":1757469980293},"C:/SDE/source/claude-code-riskexec/.claude-code-router/config.json":{"filePath":"C:/SDE/source/claude-code-riskexec/.claude-code-router/config.json","baseContent":"{\n  \"HOST\": \"127.0.0.1\",\n  \"APIKEY\": \"${CCR_APIKEY}\",\n\n  \"LOG\": true,\n  \"LOG_LEVEL\": \"info\",\n  \"API_TIMEOUT_MS\": 600000,\n\n  \"Providers\": [\n    {\n      \"name\": \"anthropic\",\n      \"api_base_url\": \"https://api.anthropic.com/v1/messages\",\n      \"api_key\": \"${ANTHROPIC_API_KEY}\",\n      \"models\": [\n        \"claude-3.7-sonnet\",\n        \"claude-3.7-haiku\"\n      ],\n      \"transformer\": { \"use\": [\"anthropic\"] }\n    }\n  ],\n\n  \"Router\": {\n    \"default\": \"anthropic,claude-3.7-sonnet\",\n    \"background\": \"anthropic,claude-3.7-haiku\",\n    \"think\": \"anthropic,claude-3.7-sonnet\",\n    \"longContext\": \"anthropic,claude-3.7-sonnet\",\n    \"longContextThreshold\": 60000\n  }\n}\n","baseTimestamp":1757470105984},"C:/SDE/source/claude-code-riskexec/scripts/router-verify.js":{"filePath":"C:/SDE/source/claude-code-riskexec/scripts/router-verify.js","baseContent":"// scripts/router-verify.js\nconst fs = require(\"fs\");\nconst os = require(\"os\");\nconst path = require(\"path\");\n\nfunction die(msg, code = 1) { console.error(msg); process.exit(code); }\n\nconst cfg = path.join(os.homedir(), \".claude-code-router\", \"config.json\");\nif (!fs.existsSync(cfg)) die(\"Router config missing at ~/.claude-code-router/config.json\", 2);\n\nconst json = JSON.parse(fs.readFileSync(cfg, \"utf8\"));\n\nconst allowedProviders = new Set([\"anthropic\"]);\nconst bannedProviders = new Set([\"openrouter\", \"iflow\", \"volcengine\", \"modelscope\", \"dashscope\"]);\nconst allowedModels = new Set([\"claude-3.7-sonnet\", \"claude-3.7-haiku\"]);\n\nfor (const p of json.Providers || []) {\n    if (bannedProviders.has(p.name)) die(`BANNED provider: ${p.name}`, 3);\n    if (!allowedProviders.has(p.name)) die(`Only ${[...allowedProviders]} allowed, found ${p.name}`, 4);\n    for (const m of p.models || []) {\n        if (!allowedModels.has(m)) die(`Model not allowed: ${m}`, 5);\n    }\n}\n\nconst r = json.Router || {};\nfor (const k of [\"default\", \"background\", \"think\", \"longContext\"]) {\n    if (!r[k]) continue;\n    const [prov, model] = String(r[k]).split(\",\");\n    if (!allowedProviders.has(prov)) die(`Route '${k}' must use provider 'anthropic', found '${prov}'`, 6);\n    if (!allowedModels.has(model)) die(`Route '${k}' model not allowed: ${model}`, 7);\n}\n\nconsole.log(\"Router config OK. Local routing only. Anthropic only. Allowed models only.\");\n","baseTimestamp":1757470290283}}}